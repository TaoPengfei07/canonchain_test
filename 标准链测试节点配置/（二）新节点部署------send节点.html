<html>
<head>
  <title>（二）新节点部署------send节点</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600667 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="409"/>
<h1>（二）新节点部署------send节点</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2019/4/28 11:13</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><span style="font-weight: bold;">（二）新节点部署------send节点</span></div><div><br/></div><div><span style="background-color: rgb(255, 250, 165); font-weight: bold;-evernote-highlight:true;">Send节点部署</span></div><div><br/></div><div><span style="font-weight: bold;">a.     在D盘根目录下新建send节点文件夹 : canonchain_send .</span></div><div><span style="font-weight: bold;">            </span></div><div><span style="font-weight: bold;">b.     copy canonchain.exe canonchain.pdb 到上述文件夹</span></div><div><span style="font-weight: bold;">            </span></div><div><span style="font-weight: bold;">c.     在canonchain_send目录下，启动send节点 （新建txt文件然后改为.bat文件如data.bat,执行命令如下）</span></div><div><br/></div><div><span style="font-weight: bold;">            如：   </span><span style="font-weight: bold;">.\canonchain.exe --daemon --rpc --rpc_control --data_path=.\data  </span></div><div><span style="font-weight: bold;">                 </span></div><div><span style="font-weight: bold;">           启动之后会在--data_path指定路径下生成config.json,db,log等文件。      </span></div><div><br/></div><div><span style="font-weight: bold;">d.     运行data.bat文件(此时data.bat批处理文件为send节点的启动文件)  生成data目录 <span>    </span>在data目录下生成config.json文件等等文件后停止运行send节点（ctrl c） <span>    </span>删除后缀为*db的目录或文件</span></div><div><span style="font-weight: bold;">    </span></div><div><span style="font-weight: bold;">e.     修改生成后的config文件：</span></div><div><br/></div><div><span style="font-weight: bold;">            rpc_port 改为6765</span></div><div><br/></div><div><span style="font-weight: bold;">            log_console 改为true</span></div><div><br/></div><div><span style="font-weight: bold;">            #ps:修改config.json配置文件需重新启动节点才会生效。（重新运行.bat文件）</span></div><div><br/></div><div><span style="font-weight: bold;">f.     在新的机子上安装jdk与jmeter</span></div><div><br/></div><div><span style="color: rgb(227, 0, 0); font-weight: bold;">g.    在jmeter的bin目录下新建create.txt文件，输入12345678，此文件为jmeter需要使用的send节点的密码   ;     如果通过rpc接口等修改了send的密码，需要同时更新此create.txt文件</span></div><div><br/></div><div><span style="color: rgb(227, 0, 0); font-weight: bold;">            如    在D:\java\apache-jmeter-3.2\bin目录下新建create.txt文件</span></div><div><span style="font-weight: bold;">    </span></div><div><span style="font-weight: bold;">h.     在canonchain_send同级目录下，新建dropdb.bat文件，内容如下（删除canonchain_send\data目录下的所有db文件或目录）：</span></div><div><br/></div><div><span style="font-weight: bold;">            del /s /q D:\canonchain_send\data\blockdb &amp;&amp; del /s /q D:\canonchain_send\data\keydb</span></div><div><span style="font-weight: bold;">       </span></div><div><span style="font-weight: bold;">            del /s /q D:\canonchain_send\data\p2pdb &amp;&amp; del /s /q D:\canonchain_send\data\walletdb</span></div><div><br/></div><div><span style="font-weight: bold;">i.    在    </span><span style="color: rgb(227, 0, 0); font-weight: bold;">同一个局域网</span><span style="color: rgb(227, 0, 0); font-weight: bold;">  </span> <span style="font-weight: bold;"> 上的Controller的服务器上<span>    </span>把Slaver对应的     </span><span style="color: rgb(227, 0, 0); font-weight: bold;">内网地址    </span><span style="font-weight: bold;">添加到Controller的jemter安装路径下的jmeter.property文件中，格式如下：</span></div><div><br/></div><div><span style="font-weight: bold;">        这里的Controller与Slaver是jemter压测的概念</span></div><div><br/></div><div><span style="font-weight: bold;">        如：    由    </span><span style="color: rgb(227, 0, 0); font-weight: bold;">北京    </span><span style="font-weight: bold;">的39.105.67.44这台服务器来控制远程机子（如现在在    </span><span style="color: rgb(227, 0, 0); font-weight: bold;">北京</span> <span style="font-weight: bold;">    39.105.135.34这台机子上）    那么</span><span style="font-weight: bold;">39.105.67.44这台机子为Controller    </span><span style="font-weight: bold;">39.105.135.34这台机子为Slaver</span></div><div><br/></div><div><span style="font-weight: bold;">        如：     jmeter.property的文件路径：</span><span style="font-weight: bold;">D:\Java\jmeter\bin\jmeter.property</span></div><div><br/></div><div><span style="font-weight: bold;">                   在 </span> <span style="box-sizing: border-box; font-size: medium; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> </span><span style="box-sizing: border-box; font-size: medium; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(227, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">北京</span><span style="box-sizing: border-box; font-size: medium; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(227, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">  </span><span style="font-weight: bold;">39.105.67.44(Controller)  这台服务器上打开</span><span style="font-weight: bold;">jmeter.property</span></div><div><span style="font-weight: bold;">        </span></div><div><span style="font-weight: bold;">                   把   </span><span style="box-sizing: border-box; font-size: medium; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(227, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">北京</span>  <span style="font-size: medium; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">39.105.135.34(Slaver) 的内网地址 172.17.184.81添加到</span><span style="font-weight: bold;">jmeter.property中remote_hosts后面，<span style="font-weight: bold; color: rgb(227, 0, 0);">端口号统一使用1099</span></span></div><div><br/></div><div><span style="font-weight: bold;">       </span> <span style="font-weight: bold;"><img src="（二）新节点部署------send节点_files/1556433316(1).jpg" type="image/jpeg" data-filename="1556433316(1).jpg"/></span></div><div><span style="font-weight: bold;">                    </span></div><div><span style="font-weight: bold;">      </span></div><div><span style="font-weight: bold;">    </span></div></span>
</div></body></html> 