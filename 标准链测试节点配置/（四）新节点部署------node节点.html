<html>
<head>
  <title>（四）新节点部署------node节点</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600667 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="435"/>
<h1>（四）新节点部署------node节点</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2019/4/28 14:47</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><span style="font-weight: bold;">（四）新节点部署------node节点</span></div><div><br/></div><div><span style="background-color: rgb(255, 250, 165); font-weight: bold;-evernote-highlight:true;">Node节点部署：</span></div><div><br/></div><div><span style="font-weight: bold;">                </span><span style="font-weight: bold;">a.</span> <span style="font-weight: bold;">    </span><span style="font-weight: bold;">新建普通节点文件夹 : canonchain_witness </span></div><div><span style="font-weight: bold;">    </span></div><div><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    b.</span> <span style="font-weight: bold;">    </span><span style="font-weight: bold;">copy canonchain.exe,canonchain.pdb 到上述文件夹</span></div><div><br/></div><div><span style="font-weight: bold;">                c.     在canonchain_witness目录下<span>    </span>新建node.bat文件<span>    </span>文件内容如下：</span></div><div><br/></div><div><span style="font-weight: bold;">                        </span><span style="font-weight: bold;">D:\canonchain_witness\canonchain.exe --daemon --rpc --rpc_control --data_path=D:\canonchain_witness\node</span></div><div><span style="font-weight: bold;">                        pause</span></div><div><br/></div><div><span style="font-weight: bold;">                d.    点击node.bat    运行节点</span><span style="font-weight: bold;">     </span><span style="font-weight: bold;">在节点目录（如node）下生成config.json文件等等文件后停止运行节点（ctrl c） 删除后缀为*db的目录或文件</span></div><div><br/></div><div><span style="font-weight: bold;">                e.    配置config.json文件：</span></div><div><span style="font-weight: bold;">            </span></div><div><span style="font-weight: bold;">                       </span><span style="font-weight: bold;">log_console 改为true</span></div><div><span style="font-weight: bold;">                        </span></div><div><span style="font-weight: bold;">                </span><span style="font-weight: bold;">h.</span><span style="font-weight: bold;">  </span> <span style="font-weight: bold;"> 在canonchain_witness同级目录下，新建dropdb.bat文件，内容如下（删除canonchain_witness\node目录下的所有db文件或目录）：</span></div><div><br/></div><div><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><span style="font-weight: bold;">del /s /q D:\</span><span style="font-weight: bold;">canonchain_witness\</span><span style="font-weight: bold;">node</span><span style="font-weight: bold;">\blockdb &amp;&amp; del /s /q D:\</span><span style="font-weight: bold;">canonchain_witness\</span><span style="font-weight: bold;">node</span><span style="font-weight: bold;">\keydb</span></div><div><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><span style="font-weight: bold;">    </span><span style="font-weight: bold;">del /s /q D:\</span><span style="font-weight: bold;">canonchain_witness\</span><span style="font-weight: bold;">node</span><span style="font-weight: bold;">\p2pdb &amp;&amp; del /s /q D:\</span><span style="font-weight: bold;">canonchain_witness\</span><span style="font-weight: bold;">node</span><span style="font-weight: bold;">\walletdb</span></div><div><br/></div><div><span style="font-weight: bold;">                </span><span style="font-weight: bold;">i.    在</span><span style="font-weight: bold;">    </span><span style="color: rgb(227, 0, 0); font-weight: bold;">同一个局域网 </span><span style="color: rgb(227, 0, 0); font-weight: bold;">    </span><span style="font-weight: bold;">上的Controller的服务器上,把Slaver对应的 </span><span style="font-weight: bold;">    </span><span style="color: rgb(227, 0, 0); font-weight: bold;">内网地址</span><span style="color: rgb(227, 0, 0); font-weight: bold;">    </span><span style="font-weight: bold;">添加到Controller的jemter安装路径下的jmeter.property文件中</span></div><div><span style="font-weight: bold;">                      </span></div><div><span style="font-weight: bold;">                      这里的Controller与Slaver是jemter压测的概念</span></div><div><br/></div><div><span style="font-weight: bold;">                      如：    由    </span><span style="color: rgb(227, 0, 0); font-weight: bold;">北京    </span><span style="font-weight: bold;">的39.105.67.44这台服务器来控制远程机子（如现在在    </span><span style="color: rgb(227, 0, 0); font-weight: bold;">北京</span> <span style="font-weight: bold;">    39.105.135.34这台机子上）    那么</span><span style="font-weight: bold;">39.105.67.44这台机子为Controller    </span><span style="font-weight: bold;">39.105.135.34这台机子为Slaver</span></div><div><br/></div><div><span style="font-weight: bold;">                      如：     jmeter.property的文件路径：</span><span style="font-weight: bold;">D:\Java\jmeter\bin\jmeter.property</span></div><div><br/></div><div><span style="font-weight: bold;">                      在 </span> <span style="box-sizing: border-box; font-size: medium; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> </span><span style="box-sizing: border-box; font-size: medium; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(227, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">北京</span><span style="box-sizing: border-box; font-size: medium; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(227, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">  </span><span style="font-weight: bold;">39.105.67.44(Controller)  这台服务器上打开</span><span style="font-weight: bold;">jmeter.property</span></div><div><span style="font-weight: bold;">        </span></div><div><span style="font-weight: bold;">                      把   </span><span style="box-sizing: border-box; font-size: medium; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(227, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">北京</span>  <span style="font-size: medium; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">39.105.135.34(Slaver) 的内网地址 172.17.184.81添加到</span><span style="font-weight: bold;">jmeter.property中remote_hosts后面，</span><span style="color: rgb(227, 0, 0); font-weight: bold;">端口号统一使用1099</span></div><div><br/></div><div><span style="font-weight: bold;">                      </span><img src="（四）新节点部署------node节点_files/1556433316(1).jpg" type="image/jpeg" data-filename="1556433316(1).jpg"/></div><div><br/></div></span>
</div></body></html> 